#  2024.06.05 - TIL

# 1. Session과  Cookie


### 1-1. 왜 필요한가?

HTTP는 서버와 클라이언트 간의 요청과 응답으로 데이터를 주고 받는 형식으로 서버는 클라이언트 요청에 <br> 응답을 하고 나면 그 연결을 끊어버린다. 클라이언트는 다시 서버에 요청하려면 새로 연결하여 응답을 받아야 한다.
<br>

이렇게 되면 연결이 끊어지기 때문에 유지되어야 하는 정보들이 사라지는 문제가 발생한다.<br>
ex) 로그인된 후 로그인 정보, 장바구니에 넣은 데이터 등등..<br>

이를 해결하기 위해서 `Session`과 `Cookie`를 사용하게 된다.
<br>

### 1-2. Session과 Cookie란?

`Session` : 
연결이 끊어진 이후에도 client에 대한 정보를 유지하기 위해 서버에서 데이터를 보관하는 기술 
<br>

`Cookie` : Session과 동일한 목적을 가지지만 클라이언트 쪽에서 데이터를 보관하는 기술

### 1-3. 동작 방식

`Session`<br>
1. 클라이언트가 페이지를 요청
2. 서버는 접근한 클라이언트의 Request-Header 필드인 Cookie를 확인하여, 클라이언트가 해당 session-id를 보냈는지 확인
3. session-id가 존재하지 않는다면, 서버는 session-id를 생성해 클라이언트에게 전달
4. 서버에서 클라이언트로 돌려준 session-id를 쿠키를 사용해 서버에 저장
5. 클라이언트는 재접속 시, 쿠키를 이용하여 session-id 값을 서버에 전달
- 패키지 : `javax.servlet.http.HttpSesssion`, `jakarta.servlet.http.HttpSession`



`Cookie`<br>
1. 클라이언트가 페이지를 요청
2. 웹 서버는 쿠키를 생성
3. 생성한 쿠키에 정보를 담아 HTTP 화면을 돌려줄 때, 같이 클라이언트에게 전달
4. 넘겨 받은 쿠키는 클라이언트가 가지고 있다가(로컬 PC에 저장) 다시 서버에 요청할 때 요청과 함께 쿠키를 전송
5. 동일 사이트 재방문시 클라이언트의 PC에 해당 쿠키가 있는 경우, 요청 페이지와 함께 쿠키를 전송한다.
- 패키지 : `javax.servlet.http.Cookie`, `jakarta.servlet.http.Cookie`


### 1-4. 차이점

1. 저장 위치 : 쿠키는 `클라이언트(접속자 PC, 브라우저)`에 정보를 저장하고, 세션은 `웹 서버`에 저장<br>
   
2. 만료 시점 : 쿠키는 `쿠키 저장시 설정`하고, 세션은 `브라우저 종료`시 삭제된다.<br>
   - 쿠키는 브라우저가 종료되어도 만료 시점이 지나지 않으면 자동 삭제되지 않는다.
   - 쿠키에서 만료 시점을 지정하지 않으면, 세션 쿠키가 되어 브라우저 종료시 자동으로 삭제된다.
   - 세션도 기간을 설정할 수 있다.
   
3. 속도 : `쿠키가 세션보다 더 빠르다.` 
   - 클라이언트 쪽에 데이터가 저장되기 때문에 데이터 접근이 빠르기 때문.<br>
   
4. 보안 : `세션이 쿠키보다 보안적인 측면에서 좋다.`
   - 왜냐하면 세션은 실제 데이터를 서버측에 저장하고, 
클라이언트가 직접적으로 데이터를 조작할 수 없게 만든다. 
   - 또한 서버는 세션에 대한 다양한 보안 정책을 적용할 수 있기 때문에 세션이 민감한 데이터의 보호나 무결성을<br> 보장할 수 있다.




